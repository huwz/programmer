``mod_include`` 模块
====================

概述
----

这个模块提供了一个过滤器，用于处理发送给客户端的文件。
处理过程由格式化的 ``SGML`` （通用标记语言）注释控制，即元素 `elements`。
这些元素允许使用条件文本，其他文件或程序的包含指令，以及环境变量的设置和打印。

开启 SSI
--------

“服务器嵌入” (SSI) 通过 ``INCLUDES`` 过滤器执行。
如果文档中包含 SSI 指令，且文档后缀为 ``.shtml``，则以下指令会让阿帕奇对指令进行解析，
并将产生的文档文件的 ``mime`` (多用途互联网邮件扩展）类型设置为 ``text/html``：

.. code-block:: html
 
 AddType text/html .shtml
 AddOutputFilter INCLUDES .shtml

同时必须使用指令 ``Options +Includes``。
（在 ``<Directory>`` / ``.htacess`` 文件中设置。）

为了后向兼容， ``server_parsed`` 处理器也会使用 ``INCLUDES`` 过滤器。
同时，阿帕奇也会对 ``mime`` 类型为 ``text/x-server_parsed-html`` 或 ``text/x-server_parsed-html3`` 的文档用 ``INCLUDES`` 过滤器过滤。

``PATH_INFO``
-------------

默认情况下，阿帕奇处理文件的 SSI 指令时不接受带有 ``PATH_INFO`` （跟踪路径名信息）的请求。
可以使用 ``AcceptPathInfo`` 指令配置，使服务器接受带有 ``PATH_INFO`` 的请求。

可用元素
--------

文档中的特殊指令被嵌入为 ``SGML`` 注释。

命令语法：``<!--#element attribute=value attribute=value ... -->``。

其中，``value`` 一般包含在双引号内，也可以用单引号或者重音符 `````。

.. note::
 注释结束符 ``-->`` 前面必须有一个空格，保证不会被当做 SSI 符号的一部分。
 ``<!--#`` 不能有任何空格。

元素有：

+----------+----------------------+
| element  | 说明                 |
+==========+======================+
| config   | 设置输出格式         |
+----------+----------------------+
| echo     | 打印变量             |
+----------+----------------------+
| exec     | 执行内部程序         |
+----------+----------------------+
| fsize    | 打印文件大小         |
+----------+----------------------+
| flastod  | 打印文件最近修改时间 |
+----------+----------------------+
| include  | 包含文件             |
+----------+----------------------+
| printenv | 打印所有可获取的变量 |
+----------+----------------------+
| set      | 设置一个变量的值     |
+----------+----------------------+

SSI 元素可以由其他模块定义，不单单只有 ``mod_include``。
但是 ``exec`` 元素是由 ``mod_cgi`` 提供的，只有这个模块加载了之后，才可以使用。

``config``
----------

控制解析的不同方面，它含有以下属性：

+-------------+-----------------------------------------------------------------------------------------+
| attribute   | value                                                                                   |
+=============+=========================================================================================+
| ``echomsg`` | 发送给给客户端的提示信息，表示 ``echo`` 试图打印未定义变量；                            |
|             | 值会覆盖 ``SSIUndefinedEcho`` 指令生成的消息文本                                        |
+-------------+-----------------------------------------------------------------------------------------+
| ``errmsg``  | 发送给客户端的错误信息，表示文档解析出错；                                              |
|             | 值会覆盖 ``SSIErrorMsg`` 指令生成的消息文本                                             |
+-------------+-----------------------------------------------------------------------------------------+
| ``sizefmt`` | 表示文件大小，值为 ``bytes`` / ``abbrev``，后者会随值的大小选择合适单位(``Kb/Mb`` etc.) |
+-------------+-----------------------------------------------------------------------------------------+
| timefmt     | 设置时间打印格式                                                                        |
+-------------+-----------------------------------------------------------------------------------------+
